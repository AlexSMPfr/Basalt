From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jason Penilla <11360596+jpenilla@users.noreply.github.com>
Date: Tue, 29 Oct 2024 17:39:34 -0700
Subject: [PATCH] Add isTickSleeping API


diff --git a/src/main/java/net/minecraft/server/MinecraftServer.java b/src/main/java/net/minecraft/server/MinecraftServer.java
index 7933d6900dac67a24fb5f9378097dbde34be30b1..7178380c61ad797de636d34731fb7b18c643e9fd 100644
--- a/src/main/java/net/minecraft/server/MinecraftServer.java
+++ b/src/main/java/net/minecraft/server/MinecraftServer.java
@@ -3186,4 +3186,10 @@ public abstract class MinecraftServer extends ReentrantBlockableEventLoop<TickTa
         }
     }
     // Paper end - Add tick times API and /mspt command
+
+    // Paper start - sleeping api
+    public boolean isTickSleeping() {
+        return this.emptyTicks >= this.pauseWhileEmptySeconds() * 20;
+    }
+    // Paper end - sleeping api
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 9f9eefc7346838a9effcda861cecd098092efb0f..1cb4aa3edb4149a01c3473379e101d926a581cfc 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -3235,5 +3235,10 @@ public final class CraftServer implements Server {
     public io.papermc.paper.potion.PaperPotionBrewer getPotionBrewer() {
         return this.potionBrewer;
     }
+
+    @Override
+    public boolean isTickSleeping() {
+        return this.console.isTickSleeping();
+    }
     // Paper end
 }
